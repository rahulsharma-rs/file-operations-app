{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahulsharma/Downloads/file-operations-app/app/actions.ts"],"sourcesContent":["'use server'\n\nimport fs from 'fs/promises'\nimport path from 'path'\nimport os from 'os'\nimport { FileItem } from '@/lib/mockData'\n\nconst BASE_PATH = os.homedir()\n\nexport async function getFiles(currentPathSegments: string[]): Promise<FileItem[]> {\n    try {\n        const relativePath = path.join(...currentPathSegments)\n        const fullPath = path.join(BASE_PATH, relativePath)\n\n        // Security check: Ensure we don't escape home directory (basic check)\n        if (!fullPath.startsWith(BASE_PATH)) {\n            throw new Error(\"Access denied: Cannot traverse above home directory\")\n        }\n\n        const entries = await fs.readdir(fullPath, { withFileTypes: true })\n\n        const files = await Promise.all(entries.map(async (entry) => {\n            try {\n                const entryPath = path.join(fullPath, entry.name)\n                const stats = await fs.stat(entryPath)\n\n                let type: FileItem['type'] = 'file'\n                if (entry.isDirectory()) type = 'folder'\n                else if (entry.name.endsWith('.sh') || entry.name.endsWith('.py')) type = 'script'\n                else if (entry.name.endsWith('.csv') || entry.name.endsWith('.json')) type = 'data'\n                else if (entry.name.endsWith('.zip') || entry.name.endsWith('.tar') || entry.name.endsWith('.gz')) type = 'archive'\n\n                // Permission string simulation (Node fs doesn't give \"rwx\" string directly easily across platforms, \n                // but we can approximate from mode)\n                const perms = (stats.mode & parseInt('777', 8)).toString(8) // simple octal\n\n                return {\n                    id: entryPath, // Use path as ID\n                    name: entry.name,\n                    type: type,\n                    path: entryPath,\n                    owner: String(stats.uid), // In real Node, getting username requires 'os' or 'child_process' usually\n                    group: String(stats.gid),\n                    modifiedAt: stats.mtime.toISOString(),\n                    sizeBytes: stats.size,\n                    permissions: `0${perms}` // Mocking the rwx string is complex, showing octal for now\n                }\n            } catch (e) {\n                return null\n            }\n        }))\n\n        return files.filter((f): f is FileItem => f !== null)\n    } catch (error) {\n        console.error(\"Error reading directory:\", error)\n        return []\n    }\n}\n\nexport async function shareFile(sourcePath: string, targetUsername: string): Promise<{ success: boolean, message: string }> {\n    try {\n        const sharedRoot = path.join(os.homedir(), 'hpc_shared')\n        const targetUserDir = path.join(sharedRoot, targetUsername)\n\n        // Ensure shared directories exist\n        await fs.mkdir(targetUserDir, { recursive: true })\n\n        const sourceName = path.basename(sourcePath)\n        const destPath = path.join(targetUserDir, sourceName)\n\n        try {\n            await fs.symlink(sourcePath, destPath)\n            return { success: true, message: `Successfully shared with ${targetUsername}` }\n        } catch (e: any) {\n            if (e.code === 'EEXIST') {\n                return { success: false, message: `Already shared with ${targetUsername}` }\n            }\n            throw e\n        }\n    } catch (error: any) {\n        console.error(\"Error sharing file:\", error)\n        return { success: false, message: error.message || \"Failed to share file\" }\n    }\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;;;;;;AAGA,MAAM,YAAY,wGAAE,CAAC,OAAO;AAErB,eAAe,SAAS,mBAA6B;IACxD,IAAI;QACA,MAAM,eAAe,4GAAI,CAAC,IAAI,IAAI;QAClC,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,WAAW;QAEtC,sEAAsE;QACtE,IAAI,CAAC,SAAS,UAAU,CAAC,YAAY;YACjC,MAAM,IAAI,MAAM;QACpB;QAEA,MAAM,UAAU,MAAM,gIAAE,CAAC,OAAO,CAAC,UAAU;YAAE,eAAe;QAAK;QAEjE,MAAM,QAAQ,MAAM,QAAQ,GAAG,CAAC,QAAQ,GAAG,CAAC,OAAO;YAC/C,IAAI;gBACA,MAAM,YAAY,4GAAI,CAAC,IAAI,CAAC,UAAU,MAAM,IAAI;gBAChD,MAAM,QAAQ,MAAM,gIAAE,CAAC,IAAI,CAAC;gBAE5B,IAAI,OAAyB;gBAC7B,IAAI,MAAM,WAAW,IAAI,OAAO;qBAC3B,IAAI,MAAM,IAAI,CAAC,QAAQ,CAAC,UAAU,MAAM,IAAI,CAAC,QAAQ,CAAC,QAAQ,OAAO;qBACrE,IAAI,MAAM,IAAI,CAAC,QAAQ,CAAC,WAAW,MAAM,IAAI,CAAC,QAAQ,CAAC,UAAU,OAAO;qBACxE,IAAI,MAAM,IAAI,CAAC,QAAQ,CAAC,WAAW,MAAM,IAAI,CAAC,QAAQ,CAAC,WAAW,MAAM,IAAI,CAAC,QAAQ,CAAC,QAAQ,OAAO;gBAE1G,qGAAqG;gBACrG,oCAAoC;gBACpC,MAAM,QAAQ,CAAC,MAAM,IAAI,GAAG,SAAS,OAAO,EAAE,EAAE,QAAQ,CAAC,GAAG,eAAe;;gBAE3E,OAAO;oBACH,IAAI;oBACJ,MAAM,MAAM,IAAI;oBAChB,MAAM;oBACN,MAAM;oBACN,OAAO,OAAO,MAAM,GAAG;oBACvB,OAAO,OAAO,MAAM,GAAG;oBACvB,YAAY,MAAM,KAAK,CAAC,WAAW;oBACnC,WAAW,MAAM,IAAI;oBACrB,aAAa,CAAC,CAAC,EAAE,OAAO,CAAC,2DAA2D;gBACxF;YACJ,EAAE,OAAO,GAAG;gBACR,OAAO;YACX;QACJ;QAEA,OAAO,MAAM,MAAM,CAAC,CAAC,IAAqB,MAAM;IACpD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,EAAE;IACb;AACJ;AAEO,eAAe,UAAU,UAAkB,EAAE,cAAsB;IACtE,IAAI;QACA,MAAM,aAAa,4GAAI,CAAC,IAAI,CAAC,wGAAE,CAAC,OAAO,IAAI;QAC3C,MAAM,gBAAgB,4GAAI,CAAC,IAAI,CAAC,YAAY;QAE5C,kCAAkC;QAClC,MAAM,gIAAE,CAAC,KAAK,CAAC,eAAe;YAAE,WAAW;QAAK;QAEhD,MAAM,aAAa,4GAAI,CAAC,QAAQ,CAAC;QACjC,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,eAAe;QAE1C,IAAI;YACA,MAAM,gIAAE,CAAC,OAAO,CAAC,YAAY;YAC7B,OAAO;gBAAE,SAAS;gBAAM,SAAS,CAAC,yBAAyB,EAAE,gBAAgB;YAAC;QAClF,EAAE,OAAO,GAAQ;YACb,IAAI,EAAE,IAAI,KAAK,UAAU;gBACrB,OAAO;oBAAE,SAAS;oBAAO,SAAS,CAAC,oBAAoB,EAAE,gBAAgB;gBAAC;YAC9E;YACA,MAAM;QACV;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO;YAAE,SAAS;YAAO,SAAS,MAAM,OAAO,IAAI;QAAuB;IAC9E;AACJ;;;IA1EsB;IAkDA;;AAlDA,+OAAA;AAkDA,+OAAA"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahulsharma/Downloads/file-operations-app/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getFiles as '4063d695a9e853e52488e4eae429ab5f3c0eb3e216'} from 'ACTIONS_MODULE0'\nexport {shareFile as '60c646fe7379a2a2d65c23cd27673dff057d09f365'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahulsharma/Downloads/file-operations-app/node_modules/next/src/build/webpack/loaders/next-flight-loader/server-reference.ts"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\nexport { registerServerReference } from 'react-server-dom-webpack/server'\n"],"names":["registerServerReference"],"mappings":"AAAA,oDAAoD;;;+BAC3CA,2BAAAA;;;eAAAA,QAAAA,uBAAuB;;;wBAAQ","ignoreList":[0]}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///Users/rahulsharma/Downloads/file-operations-app/node_modules/next/src/build/webpack/loaders/next-flight-loader/action-validate.ts"],"sourcesContent":["// This function ensures that all the exported values are valid server actions,\n// during the runtime. By definition all actions are required to be async\n// functions, but here we can only check that they are functions.\nexport function ensureServerEntryExports(actions: any[]) {\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i]\n    if (typeof action !== 'function') {\n      throw new Error(\n        `A \"use server\" file can only export async functions, found ${typeof action}.\\nRead more: https://nextjs.org/docs/messages/invalid-use-server-value`\n      )\n    }\n  }\n}\n"],"names":["ensureServerEntryExports","actions","i","length","action","Error"],"mappings":"AAAA,+EAA+E;AAC/E,yEAAyE;AACzE,iEAAiE;;;;+BACjDA,4BAAAA;;;eAAAA;;;AAAT,SAASA,yBAAyBC,OAAc;IACrD,IAAK,IAAIC,IAAI,GAAGA,IAAID,QAAQE,MAAM,EAAED,IAAK;QACvC,MAAME,SAASH,OAAO,CAACC,EAAE;QACzB,IAAI,OAAOE,WAAW,YAAY;YAChC,MAAM,OAAA,cAEL,CAFK,IAAIC,MACR,CAAC,2DAA2D,EAAE,OAAOD,OAAO,uEAAuE,CAAC,GADhJ,qBAAA;uBAAA;4BAAA;8BAAA;YAEN;QACF;IACF;AACF","ignoreList":[0]}}]
}