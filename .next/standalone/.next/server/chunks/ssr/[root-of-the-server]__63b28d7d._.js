module.exports=[37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},24868,(a,b,c)=>{b.exports=a.x("fs/promises",()=>require("fs/promises"))},33405,(a,b,c)=>{b.exports=a.x("child_process",()=>require("child_process"))},13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},57526,a=>{"use strict";var b=a.i(37936),c=a.i(24868),d=a.i(14747),e=a.i(46786),f=a.i(33405),g=a.i(24361),h=a.i(13095);let i=e.default.homedir();async function j(a){try{let b=d.default.join(...a),e=d.default.join(i,b);if(!e.startsWith(i))throw Error("Access denied: Cannot traverse above home directory");let f=await c.default.readdir(e,{withFileTypes:!0});return(await Promise.all(f.map(async a=>{try{let b=d.default.join(e,a.name),f=await c.default.stat(b),g="file";a.isDirectory()?g="folder":a.name.endsWith(".sh")||a.name.endsWith(".py")?g="script":a.name.endsWith(".csv")||a.name.endsWith(".json")?g="data":(a.name.endsWith(".zip")||a.name.endsWith(".tar")||a.name.endsWith(".gz"))&&(g="archive");let h=(f.mode&parseInt("777",8)).toString(8);return{id:b,name:a.name,type:g,path:b,owner:await m(f.uid),group:String(f.gid),modifiedAt:f.mtime.toISOString(),sizeBytes:f.size,permissions:`0${h}`}}catch(a){return null}}))).filter(a=>null!==a)}catch(a){return console.error("Error reading directory:",a),[]}}let k=g.default.promisify(f.exec),l=new Map;async function m(a){if(l.has(a))return l.get(a);try{let{stdout:b}=await k(`id -nu ${a}`),c=b.trim();return l.set(a,c),c}catch(b){return String(a)}}async function n(a){try{return await k(`id -u ${a}`),!0}catch(a){return!1}}async function o(a,b){if(!await n(b))return{success:!1,message:`User '${b}' does not exist on this system.`};try{let f=d.default.join(e.default.homedir(),"hpc_shared"),g=d.default.join(f,b);await c.default.mkdir(g,{recursive:!0});let h=d.default.basename(a),i=d.default.join(g,h);try{return await c.default.symlink(a,i),{success:!0,message:`Successfully shared with ${b}`}}catch(a){if("EEXIST"===a.code)return{success:!1,message:`Already shared with ${b}`};throw a}}catch(a){return console.error("Error sharing file:",a),{success:!1,message:a.message||"Failed to share file"}}}async function p(a){try{let b=d.default.join(e.default.homedir(),"hpc_shared");try{let e=await c.default.readdir(b,{withFileTypes:!0}),f=[];for(let g of e){if(!g.isDirectory())continue;let e=d.default.join(b,g.name);try{for(let b of(await c.default.readdir(e))){let h=d.default.join(e,b);try{await c.default.readlink(h)===a&&f.push(g.name)}catch(a){}}}catch(a){}}return f}catch(a){return[]}}catch(a){return console.error("Error getting shares:",a),[]}}async function q(a){try{let b=e.default.userInfo().username,f=d.default.join(e.default.homedir(),"hpc_shared",b);await c.default.mkdir(f,{recursive:!0});let g=d.default.join(...a),h=d.default.join(f,g);if(!h.startsWith(f))throw Error("Access denied: Cannot traverse above shared root");let i=await c.default.readdir(h,{withFileTypes:!0});return(await Promise.all(i.map(async a=>{try{let b=d.default.join(h,a.name),e=await c.default.stat(b),f="file";a.isDirectory()&&(f="folder"),!a.isDirectory()&&(a.name.endsWith(".sh")||a.name.endsWith(".py")?f="script":a.name.endsWith(".csv")||a.name.endsWith(".json")?f="data":(a.name.endsWith(".zip")||a.name.endsWith(".tar")||a.name.endsWith(".gz"))&&(f="archive"));let g=(e.mode&parseInt("777",8)).toString(8);return{id:b,name:a.name,type:f,path:b,owner:await m(e.uid),group:String(e.gid),modifiedAt:e.mtime.toISOString(),sizeBytes:e.size,permissions:`0${g}`}}catch(a){return null}}))).filter(a=>null!==a)}catch(a){return console.error("Error getting shared files:",a),[]}}async function r(){try{let a=d.default.join(e.default.homedir(),"hpc_shared"),b=e.default.homedir(),f=new Map;try{for(let e of(await c.default.readdir(a,{withFileTypes:!0}))){if(!e.isDirectory())continue;let g=d.default.join(a,e.name);try{for(let a of(await c.default.readdir(g))){let h=d.default.join(g,a);try{let a=await c.default.readlink(h);a.startsWith(b)&&(f.has(a)||f.set(a,[]),f.get(a)?.push({username:e.name,linkPath:h}))}catch(a){}}}catch(a){}}let e=[];for(let[a,b]of f.entries())try{let f=await c.default.stat(a),g=d.default.basename(a),h="file";f.isDirectory()?h="folder":g.endsWith(".sh")||g.endsWith(".py")?h="script":g.endsWith(".csv")||g.endsWith(".json")?h="data":(g.endsWith(".zip")||g.endsWith(".tar")||g.endsWith(".gz"))&&(h="archive");let i=(f.mode&parseInt("777",8)).toString(8);e.push({id:a,name:g,type:h,path:a,owner:await m(f.uid),group:String(f.gid),modifiedAt:f.mtime.toISOString(),sizeBytes:f.size,permissions:`0${i}`,sharedWith:b.map(a=>({username:a.username,permissions:"read-only"}))})}catch(a){}return e}catch(a){return[]}}catch(a){return console.error("Error getting outgoing shares:",a),[]}}async function s(a,b){try{let f=d.default.join(e.default.homedir(),"hpc_shared",a,b);return await c.default.unlink(f),{success:!0,message:`Unshared ${b} with ${a}`}}catch(a){return{success:!1,message:a.message||"Failed to unshare"}}}async function t(a,b){try{return await c.default.chmod(a,b),{success:!0,message:`Updated permissions for ${d.default.basename(a)}`}}catch(a){return{success:!1,message:a.message||"Failed to change permissions"}}}async function u(a){try{let b=a.get("file"),e=JSON.parse(a.get("pathSegments"));if(!b)throw Error("No file provided");let f=Buffer.from(await b.arrayBuffer()),g=d.default.join(...e),h=d.default.join(i,g);if(!h.startsWith(i))throw Error("Access denied");return await c.default.writeFile(d.default.join(h,b.name),f),{success:!0,message:`Uploaded ${b.name}`}}catch(a){return console.error("Upload error:",a),{success:!1,message:a.message||"Upload failed"}}}async function v(a,b){try{let e=d.default.join(...a),f=d.default.join(i,e,b);if(!f.startsWith(i))throw Error("Access denied");return await c.default.mkdir(f),{success:!0,message:`Created folder ${b}`}}catch(a){return{success:!1,message:a.message||"Failed to create folder"}}}async function w(a){return y(a)}let x=d.default.join(e.default.homedir(),".hpc_trash");async function y(a){try{await c.default.mkdir(x,{recursive:!0});let b=Date.now(),e=`${d.default.basename(a)}_${b}`,f=d.default.join(x,e),g={originalPath:a,deletedAt:new Date().toISOString()};return await c.default.writeFile(`${f}.meta`,JSON.stringify(g)),await c.default.rename(a,f),{success:!0,message:"Moved to trash"}}catch(a){return console.error("Trash error:",a),{success:!1,message:a.message||"Failed to move to trash"}}}async function z(){try{await c.default.mkdir(x,{recursive:!0});let a=await c.default.readdir(x);return(await Promise.all(a.map(async a=>{if(a.endsWith(".meta"))return null;try{let b=d.default.join(x,a),e=await c.default.stat(b),f=a.split("_").slice(0,-1).join("_")||a;return{id:b,name:f,type:e.isDirectory()?"folder":"file",path:b,owner:await m(e.uid),group:String(e.gid),modifiedAt:e.mtime.toISOString(),sizeBytes:e.size,permissions:"000"}}catch(a){return null}}))).filter(a=>null!==a)}catch(a){return[]}}async function A(a){try{let b=`${a}.meta`,f=d.default.join(e.default.homedir(),d.default.basename(a).split("_").slice(0,-1).join("_"));try{let a=await c.default.readFile(b,"utf-8");f=JSON.parse(a).originalPath}catch(a){}try{return await c.default.access(f),{success:!1,message:"Original location occupied. Rename or move file first."}}catch(a){}await c.default.rename(a,f);try{await c.default.unlink(b)}catch(a){}return{success:!0,message:"Restored successfully"}}catch(a){return{success:!1,message:a.message||"Failed to restore"}}}async function B(a){try{if(!a.startsWith(x))throw Error("Access denied: Can only permanent delete from trash");await c.default.rm(a,{recursive:!0,force:!0});try{await c.default.unlink(`${a}.meta`)}catch(a){}return{success:!0,message:"Permanently deleted"}}catch(a){return{success:!1,message:a.message}}}async function C(){try{let b=[],e=Date.now()-6048e5;async function a(f,g){if(!(g>4))try{for(let h of(await c.default.readdir(f))){if(h.startsWith(".")||"node_modules"===h||"Library"===h)continue;let i=d.default.join(f,h);try{let d=await c.default.stat(i);d.isDirectory()?await a(i,g+1):d.mtimeMs>e&&b.push({id:i,name:h,type:"file",path:i,owner:await m(d.uid),group:String(d.gid),modifiedAt:d.mtime.toISOString(),sizeBytes:d.size,permissions:"rw-r--r--"})}catch(a){}}}catch(a){}}return await a(i,0),b.sort((a,b)=>new Date(b.modifiedAt).getTime()-new Date(a.modifiedAt).getTime()).slice(0,50)}catch(a){return console.error("Recent files error:",a),[]}}async function D(a,b){try{let e=d.default.dirname(a),f=d.default.join(e,b);if(!f.startsWith(i))throw Error("Access denied");return await c.default.rename(a,f),{success:!0,message:`Renamed to ${b}`}}catch(a){return{success:!1,message:a.message||"Failed to rename"}}}async function E(a,b){try{if(!a.startsWith(i)||!b.startsWith(i))throw Error("Access denied");let e=d.default.basename(a),f=d.default.join(b,e);return await c.default.rename(a,f),{success:!0,message:`Moved to ${b}`}}catch(a){return{success:!1,message:a.message||"Failed to move"}}}let F=d.default.join(e.default.homedir(),".hpc_favorites.json");async function G(a){try{let b=[];try{let a=await c.default.readFile(F,"utf-8");b=JSON.parse(a)}catch(a){}let d=b.indexOf(a),e=!1;return d>=0?(b.splice(d,1),e=!1):(b.push(a),e=!0),await c.default.writeFile(F,JSON.stringify(b)),{success:!0,message:e?"Added to favorites":"Removed from favorites",isFavorite:e}}catch(a){return{success:!1,message:"Failed to update favorites",isFavorite:!1}}}async function H(){try{let a=[];try{let b=await c.default.readFile(F,"utf-8");a=JSON.parse(b)}catch(a){return[]}return(await Promise.all(a.map(async a=>{try{let b=await c.default.stat(a);return{id:a,name:d.default.basename(a),type:b.isDirectory()?"folder":"file",path:a,owner:await m(b.uid),group:String(b.gid),modifiedAt:b.mtime.toISOString(),sizeBytes:b.size,permissions:"rw-r--r--"}}catch(a){return null}}))).filter(a=>null!==a)}catch(a){return[]}}(0,h.ensureServerEntryExports)([j,o,p,q,r,s,t,u,v,w,y,z,A,B,C,D,E,G,H]),(0,b.registerServerReference)(j,"40941e482de4f42ccb95edec6660221d0516e08788",null),(0,b.registerServerReference)(o,"60c024e4a58690d73c23812a08c9196438e1a69132",null),(0,b.registerServerReference)(p,"4012cdbce43b2121c6cdef2f51f309e074242d3bae",null),(0,b.registerServerReference)(q,"406e7a81ac954932304de2a55931225c66853bbb12",null),(0,b.registerServerReference)(r,"00f9a7d16ac14cda9aa8721c9d13a5b88e80f0c31c",null),(0,b.registerServerReference)(s,"601150663fbd8616944fcc517785e2a164d23c29d8",null),(0,b.registerServerReference)(t,"60305d12482345710e4ea80b493df9864261990fb4",null),(0,b.registerServerReference)(u,"40585f2776294156ef27ce9123ef39b5e770fdc18f",null),(0,b.registerServerReference)(v,"6034d279cf611d57eeec25a1ffed7815f0a679b768",null),(0,b.registerServerReference)(w,"405e156af4366a51aa1537f64461b58d8d722da2e6",null),(0,b.registerServerReference)(y,"40888585945c9c7f5bed3803c959c20d15da9af09a",null),(0,b.registerServerReference)(z,"006470ac00b67e4c5b642dae92b2f96a0825ea0bc3",null),(0,b.registerServerReference)(A,"4014f799c6635a61d197a483e33f1edb636a04f0cd",null),(0,b.registerServerReference)(B,"40e18ca4e5d6ec9bf9affb87fdce6c1b1f830b4716",null),(0,b.registerServerReference)(C,"004e041c3f96704484a7a9d46bd72cd2e8b1fea9ae",null),(0,b.registerServerReference)(D,"608051b21eb302b0869f424a9459f2a58659e71b29",null),(0,b.registerServerReference)(E,"6021916da99beda7f05077882d4d5c3b2a9244a101",null),(0,b.registerServerReference)(G,"40d56b8483b002d733c3b865bdb1f5b8e827cc804d",null),(0,b.registerServerReference)(H,"009183d60557e171b61e47d196fdc3c8fb3d51fdab",null),a.s([],71570),a.i(71570),a.s(["004e041c3f96704484a7a9d46bd72cd2e8b1fea9ae",()=>C,"006470ac00b67e4c5b642dae92b2f96a0825ea0bc3",()=>z,"009183d60557e171b61e47d196fdc3c8fb3d51fdab",()=>H,"00f9a7d16ac14cda9aa8721c9d13a5b88e80f0c31c",()=>r,"4012cdbce43b2121c6cdef2f51f309e074242d3bae",()=>p,"4014f799c6635a61d197a483e33f1edb636a04f0cd",()=>A,"40585f2776294156ef27ce9123ef39b5e770fdc18f",()=>u,"405e156af4366a51aa1537f64461b58d8d722da2e6",()=>w,"406e7a81ac954932304de2a55931225c66853bbb12",()=>q,"40941e482de4f42ccb95edec6660221d0516e08788",()=>j,"40d56b8483b002d733c3b865bdb1f5b8e827cc804d",()=>G,"40e18ca4e5d6ec9bf9affb87fdce6c1b1f830b4716",()=>B,"601150663fbd8616944fcc517785e2a164d23c29d8",()=>s,"6021916da99beda7f05077882d4d5c3b2a9244a101",()=>E,"60305d12482345710e4ea80b493df9864261990fb4",()=>t,"6034d279cf611d57eeec25a1ffed7815f0a679b768",()=>v,"608051b21eb302b0869f424a9459f2a58659e71b29",()=>D,"60c024e4a58690d73c23812a08c9196438e1a69132",()=>o],57526)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__63b28d7d._.js.map